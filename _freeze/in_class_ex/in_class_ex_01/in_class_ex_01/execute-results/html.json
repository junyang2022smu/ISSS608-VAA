{
  "hash": "ed8cff409bfcb9980016c79d76b86528",
  "result": {
    "markdown": "---\ntitle: \"In-Class Exercise 1\"\nauthor: \"Yang Jun\"\n---\n\n\n## Getting Started\n\n### Install and Load R Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse)\n```\n:::\n\n\n### Import the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data <- read_csv(\"data/Exam_data.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 322 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): ID, CLASS, GENDER, RACE\ndbl (3): ENGLISH, MATHS, SCIENCE\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n### Working with Themes\n\nChanging the colors of plot panel background of `theme_minimal()` to light blue and the color of grid lines to white.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_data,\n       aes(y=RACE)) +\n  geom_bar() +\n  theme_minimal() + \n  theme(panel.background = element_rect(fill='lightblue', colour='lightblue'),\n        panel.grid.major = element_line(color='white'))\n```\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## Designing Data-Driven Graphics for Analysis\n\n### I. Bar Chart Makeover\n\n#### Before\n\ny-axis labels is not clear. Bars are not sorted. Frequency values not available.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_data,\n       aes(x=RACE)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n#### After\n\nThe y-axis has a clearer label, the bars are sorted by frequency in descending order, and frequency and percentage labels are provided for each bar.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_data,\n       aes(x=fct_infreq(RACE))) +\n  geom_bar() +\n  geom_text(aes(label=paste0(after_stat(count), sprintf(' (%.1f%%)', prop*100)), group=1), \n            stat='count', \n            vjust=-0.5, \n            colour='black') +\n  labs(x='Race', y='No. of Pupils') +\n  scale_y_continuous(limits=c(0,220))\n```\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n### II. Histogram Makeover\n\n#### Before\n\nFill and line colours make it difficult to see the individual bins. No mean or median reference lines.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_data,\n       aes(x=MATHS)) +\n  geom_histogram(bins=20)\n```\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n#### After\n\nChanged fill and line colours. Added mean and median reference lines (red and black respectively).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_data,\n       aes(x=MATHS)) +\n  geom_histogram(bins=20,\n                 color='black',\n                 fill='light blue') +\n  geom_vline(xintercept=mean(exam_data$MATHS), color='red', linetype='dashed', size=1) +\n  geom_vline(xintercept=median(exam_data$MATHS), color='black', linetype='dashed', size=1)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n### III. Histogram Makeover 2\n\n#### Before\n\nHistograms show distribution of English scores by gender, but without context of all pupils.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_data,\n       aes(x=ENGLISH)) +\n  geom_histogram(bins=25) +\n  facet_wrap(~GENDER)\n```\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n#### After\n\nThe histogram of all pupils is added as a light background to provide context of how each gender scores compared to the overall performance.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data_bg <- exam_data[5]\n\nggplot(exam_data,\n       aes(x=ENGLISH, fill=GENDER)) +\n  geom_histogram(data=exam_data_bg, fill='grey', alpha=0.5) +\n  geom_histogram(colour='black') +\n  facet_wrap(~GENDER) +\n  guides(fill='none') +\n  theme_bw()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n### IV. Scatterplot Makeover\n\n#### Before\n\nScatterplot of English vs Maths scores. The axis have different scales even though they have the same units, and there are no reference marks indicating the (passing) score of 50%.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_data,\n       aes(x=MATHS, y=ENGLISH)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n#### After\n\nBoth axes are standardised to the same scale. Reference lines are added to indicate scores of 50%.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_data,\n       aes(x=MATHS, y=ENGLISH)) +\n  geom_vline(xintercept=50, color='grey70', linetype='dashed', size=1) +\n  geom_hline(yintercept=50, color='grey70', linetype='dashed', size=1) +\n  geom_point() +\n  coord_fixed(xlim=c(0,100),ylim=c(0,100))\n```\n\n::: {.cell-output-display}\n![](in_class_ex_01_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "in_class_ex_01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}